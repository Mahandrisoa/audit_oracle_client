<div class="app-content box-shadow-z4" role="main">
    <div class="row p-a white lt box-shadow">
        <div class="col-md-6">
            <h2 class="m-b-0 _300 container">Audit du {{ $ctrl.dateAudit }}</h2>
        </div>
        <div class="col-md-3">
            <div class="form-group row">
                <label class="col-md-2 form-control-label _300" style="font-size:2em;">Date:</label>
                <div class="col-sm-4 col-md-10">
                    <input type="date" id="datePicker" class="form-control" ng-model="datePicker" ng-change="$ctrl.handlePickerChange(e);">
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-1 col-md-2 form-control-label _300" style="font-size:2em;">Type:</label>
                <div class="col-sm-4 col-md-10">
                    <select id="" class="form-control" ng-init="typeModel = 'Tout'" ng-model="typeModel" ng-change="$ctrl.handleTypeChange(this)">
                        <option value="Tout">Agences, Usines et Siège</option>
                        <option value="Siege">Siège</option>
                        <option value="Agence">Agences</option>
                        <option value="Usine">Usines</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group row">
                <label for="" class="col-sm-1 col-md-6 form-control-label _300" style="font-size:2em;">Temps de rafraîchissement</label>
                <div class="col-sm-4 col-md-6">
                    <select class="form-control" ng-init="refreshModel = '0'" ng-model="refreshModel" ng-change="$ctrl.handleInterval(this)">
                        <option value="0">Jamais</option>
                        <option value="10000">10 secondes</option>
                        <option value="60000">1 minute</option>
                        <option value="900000">15 minutes</option>
                        <option value="1800000">30 minutes</option>
                        <option value="3600000">1 heure</option>
                        <option value="43200000">12 heures</option>
                        <option value="86400000">24 Heure</option>
                    </select>
                </div>
            </div>
        </div>
        <a href="./history" class="md-btn md-fab m-b-sm red-700" style="position:absolute;top:80px;right:10px;">
            <span class="fa fa-history"></span>
        </a>
    </div>
    <spinner ng-show="$ctrl.showSpinner"></spinner>
    <!-- <site-information ng-show="!$ctrl.showSpinner" count="$ctrl.auditCount"></site-information> -->
    <div ng-show="!$ctrl.showSpinner" class="padding row">
        <div ng-if="$ctrl.audits.length === 0" class="container">
            <p class="h5 m-y-lg text-u-c font-bold">Aucun audit n'a été fait pour cette date.</p>
        </div>

        <div ng-if="$ctrl.audits.length != 0" class="row" style="margin-left: 25%;">
            <div class="box col-md-4 padding">
                <div class="pull-left m-r">
                    <span class="w-48 rounded red-800">
                        <i class="material-icons">&#xE0AF</i>
                    </span>
                </div>
                <div class="clear">
                    <h4 class="m-a-0 text-lg _300">
                        <b id="labelAgence">
                           {{ $ctrl.agences}} AGENCES
                        </b>
                    </h4>
                    <small class="text-muted"> </small>
                </div>
            </div>
            <div class="box col-md-4 padding">
                <div class="pull-left m-r">
                    <span class="w-48 rounded  red-800">
                        <i class="material-icons">&#xE8D1</i>
                    </span>
                </div>
                <div class="clear">
                    <h4 class="m-a-0 text-lg _300">
                        <b id="labelUsine">
                                {{ $ctrl.usines}} USINES
                        </b>
                    </h4>
                    <small class="text-muted"> </small>
                </div>
            </div>
        </div>
        <audit-detail ng-repeat="audit in $ctrl.audits" audit="audit" date="$ctrl.dateAudit"></audit-detail>
    </div>
</div>